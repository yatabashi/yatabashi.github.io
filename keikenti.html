<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title>経県値まとめ - yatabashi</title>
        <link rel="icon" href="res/favicon.ico">
        <link rel="stylesheet" href="res/style.css">

        <style>
            ul {
                display: flex;
                flex-wrap: wrap;
            }

            li {
                flex: 0 7rem;
            }

            li.hokkaido {
                flex: 1 7rem;
            }

            li.break {
                flex: 1 100%;
                list-style: none;
            }

            #table2.borderControlled tr:not(.borderTop, .borderBottom, .borderTopBottom) :is(th, td) {
                border-top: none;
                border-bottom: none;
            }

            #table2.borderControlled tr:not(.borderBottom, .borderTopBottom) :is(th, td) {
                border-bottom: none;
            }

            #table2.borderControlled tr:not(.borderTop, .borderTopBottom) :is(th, td) {
                border-top: none;
            }

            img.sorter {
                height: 1rem;
                vertical-align: middle;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>経県値まとめ</h1>
            <div class="home"><a href="index.html">ホームへ</a></div>
        </header>

        <h2>都道府県レベル</h2>
        <ul>
            <li><a id="zenkoku" target="_blank">全国</a></li>
        </ul>

        <table id="table1">
            <tr class="borderTopBottom">
                <th>区分</th>
                <th>点数</th>
                <th>通過数*</th>
                <th>訪問数</th>
                <th>（自治体数）</th>
                <th>通過率</th>
                <th>訪問率</th>
            </tr>
            <tr class="borderTopBottom">
                <th>全国</th>
            </tr>
        </table>

        <p>* 通過以上の経験がある自治体の数。以降同様</p>

        <h2>市区町村レベル</h2>

        <input type="checkbox" id="showsSubpref" name="showsSubpref" checked>
        <label for="showsSubpref">北海道の振興局別データを表示</label>

        <ul>
            <li class="hokkaido"><a id="hokkaido" target="_blank">北海道</a><span id="subprefs">（<a id="isikari" target="_blank">石狩</a>、<a id="osima" target="_blank">渡島</a>、<a id="hiyama" target="_blank">檜山</a>、<a id="siribesi" target="_blank">後志</a>、<a id="sorati" target="_blank">空知</a>、<a id="kamikawa" target="_blank">上川</a>、<a id="rumoi" target="_blank">留萌</a>、<a id="soya" target="_blank">宗谷</a>、<a id="okhotsk" target="_blank">オホーツク</a>、<a id="iburi" target="_blank">胆振</a>、<a id="hidaka" target="_blank">日高</a>、<a id="tokati" target="_blank">十勝</a>、<a id="kusiro" target="_blank">釧路</a>、<a id="nemuro" target="_blank">根室</a>）</span></li>
            <li class="break"></li>
            <li><a id="aomori" target="_blank">青森県</a></li>
            <li><a id="iwate" target="_blank">岩手県</a></li>
            <li><a id="miyagi" target="_blank">宮城県</a></li>
            <li><a id="akita" target="_blank">秋田県</a></li>
            <li><a id="yamagata" target="_blank">山形県</a></li>
            <li><a id="hukusima" target="_blank">福島県</a></li>
            <li class="break"></li>
            <li><a id="ibaraki" target="_blank">茨城県</a></li>
            <li><a id="totigi" target="_blank">栃木県</a></li>
            <li><a id="gunma" target="_blank">群馬県</a></li>
            <li><a id="saitama" target="_blank">埼玉県</a></li>
            <li><a id="tiba" target="_blank">千葉県</a></li>
            <li><a id="tokyo" target="_blank">東京都</a>**</li>
            <li><a id="kanagawa" target="_blank">神奈川県</a></li>
            <li class="break"></li>
            <li><a id="niigata" target="_blank">新潟県</a></li>
            <li><a id="toyama" target="_blank">富山県</a></li>
            <li><a id="isikawa" target="_blank">石川県</a></li>
            <li><a id="hukui" target="_blank">福井県</a></li>
            <li><a id="yamanasi" target="_blank">山梨県</a></li>
            <li><a id="nagano" target="_blank">長野県</a></li>
            <li><a id="gihu" target="_blank">岐阜県</a></li>
            <li><a id="sizuoka" target="_blank">静岡県</a></li>
            <li><a id="aiti" target="_blank">愛知県</a></li>
            <li class="break"></li>
            <li><a id="mie" target="_blank">三重県</a></li>
            <li><a id="siga" target="_blank">滋賀県</a></li>
            <li><a id="kyoto" target="_blank">京都府</a></li>
            <li><a id="osaka" target="_blank">大阪府</a></li>
            <li><a id="hyogo" target="_blank">兵庫県</a></li>
            <li><a id="nara" target="_blank">奈良県</a></li>
            <li><a id="wakayama" target="_blank">和歌山県</a></li>
            <li class="break"></li>
            <li><a id="tottori" target="_blank">鳥取県</a></li>
            <li><a id="simane" target="_blank">島根県</a></li>
            <li><a id="okayama" target="_blank">岡山県</a></li>
            <li><a id="hirosima" target="_blank">広島県</a></li>
            <li><a id="yamaguti" target="_blank">山口県</a></li>
            <li class="break"></li>
            <li><a id="tokusima" target="_blank">徳島県</a></li>
            <li><a id="kagawa" target="_blank">香川県</a></li>
            <li><a id="ehime" target="_blank">愛媛県</a></li>
            <li><a id="koti" target="_blank">高知県</a></li>
            <li class="break"></li>
            <li><a id="hukuoka" target="_blank">福岡県</a></li>
            <li><a id="saga" target="_blank">佐賀県</a></li>
            <li><a id="nagasaki" target="_blank">長崎県</a></li>
            <li><a id="kumamoto" target="_blank">熊本県</a></li>
            <li><a id="oita" target="_blank">大分県</a></li>
            <li><a id="miyazaki" target="_blank">宮崎県</a></li>
            <li><a id="kagosima" target="_blank">鹿児島県</a></li>
            <li><a id="okinawa" target="_blank">沖縄県</a></li>
        </ul>

        <p>** 東京都内の居住自治体は仮に千代田区としています。</p>

        <table id="table2" class="borderControlled">
            <tr class="borderTopBottom">
                <th hidden>-1</th>
                <th>区分</th>
                <th>点数<img class="sorter" id="col2" src="res/keikenti/arrow_drop_updown.svg"></th>
                <th>通過数<img class="sorter" id="col3" src="res/keikenti/arrow_drop_updown.svg"></th>
                <th>訪問数<img class="sorter" id="col4" src="res/keikenti/arrow_drop_updown.svg"></th>
                <th>（自治体数）<img class="sorter" id="col5" src="res/keikenti/arrow_drop_updown.svg"></th>
                <th>通過率<img class="sorter" id="col6" src="res/keikenti/arrow_drop_updown.svg"></th>
                <th>訪問率<img class="sorter" id="col7" src="res/keikenti/arrow_drop_updown.svg"></th>
            </tr>
            <tr class="borderTopBottom">
                <th hidden>0</th>
                <th>全都道府県合計</th>
            </tr>
            <tr id="hokkaidoTr" class="borderTop">
                <th hidden>1</th>
                <th>北海道</th>
            </tr>
            <tr id="isikariTr">
                <th hidden>2</th>
                <th>（石狩振興局）</th>
            </tr>
            <tr id="osimaTr">
                <th hidden>3</th>
                <th>（渡島総合振興局）</th>
            </tr>
            <tr id="hiyamaTr">
                <th hidden>4</th>
                <th>（檜山振興局）</th>
            </tr>
            <tr id="siribesiTr">
                <th hidden>5</th>
                <th>（後志総合振興局）</th>
            </tr>
            <tr id="soratiTr">
                <th hidden>6</th>
                <th>（空知総合振興局）</th>
            </tr>
            <tr id="kamikawaTr">
                <th hidden>7</th>
                <th>（上川総合振興局）</th>
            </tr>
            <tr id="rumoiTr">
                <th hidden>8</th>
                <th>（留萌振興局）</th>
            </tr>
            <tr id="soyaTr">
                <th hidden>9</th>
                <th>（宗谷総合振興局）</th>
            </tr>
            <tr id="okhotskTr">
                <th hidden>10</th>
                <th>（オホーツク総合振興局）</th>
            </tr>
            <tr id="iburiTr">
                <th hidden>11</th>
                <th>（胆振総合振興局）</th>
            </tr>
            <tr id="hidakaTr">
                <th hidden>12</th>
                <th>（日高振興局）</th>
            </tr>
            <tr id="tokatiTr">
                <th hidden>13</th>
                <th>（十勝総合振興局）</th>
            </tr>
            <tr id="kusiroTr">
                <th hidden>14</th>
                <th>（釧路総合振興局）</th>
            </tr>
            <tr id="nemuroTr">
                <th hidden>15</th>
                <th>（根室振興局）</th>
            </tr>
            <tr class="borderTop" id="aomoriTr">
                <th hidden>16</th>
                <th>青森県</th>
            </tr>
            <tr>
                <th hidden>17</th>
                <th>岩手県</th>
            </tr>
            <tr>
                <th hidden>18</th>
                <th>宮城県</th>
            </tr>
            <tr>
                <th hidden>19</th>
                <th>秋田県</th>
            </tr>
            <tr>
                <th hidden>20</th>
                <th>山形県</th>
            </tr>
            <tr>
                <th hidden>21</th>
                <th>福島県</th>
            </tr>
            <tr class="borderTop">
                <th hidden>22</th>
                <th>茨城県</th>
            </tr>
            <tr>
                <th hidden>23</th>
                <th>栃木県</th>
            </tr>
            <tr>
                <th hidden>24</th>
                <th>群馬県</th>
            </tr>
            <tr>
                <th hidden>25</th>
                <th>埼玉県</th>
            </tr>
            <tr>
                <th hidden>26</th>
                <th>千葉県</th>
            </tr>
            <tr>
                <th hidden>27</th>
                <th>東京都</th>
            </tr>
            <tr>
                <th hidden>28</th>
                <th>神奈川県</th>
            </tr>
            <tr class="borderTop">
                <th hidden>29</th>
                <th>新潟県</th>
            </tr>
            <tr>
                <th hidden>30</th>
                <th>富山県</th>
            </tr>
            <tr>
                <th hidden>31</th>
                <th>石川県</th>
            </tr>
            <tr>
                <th hidden>32</th>
                <th>福井県</th>
            </tr>
            <tr>
                <th hidden>33</th>
                <th>山梨県</th>
            </tr>
            <tr>
                <th hidden>34</th>
                <th>長野県</th>
            </tr>
            <tr>
                <th hidden>35</th>
                <th>岐阜県</th>
            </tr>
            <tr>
                <th hidden>36</th>
                <th>静岡県</th>
            </tr>
            <tr>
                <th hidden>37</th>
                <th>愛知県</th>
            </tr>
            <tr class="borderTop">
                <th hidden>38</th>
                <th>三重県</th>
            </tr>
            <tr>
                <th hidden>39</th>
                <th>滋賀県</th>
            </tr>
            <tr>
                <th hidden>40</th>
                <th>京都府</th>
            </tr>
            <tr>
                <th hidden>41</th>
                <th>大阪府</th>
            </tr>
            <tr>
                <th hidden>42</th>
                <th>兵庫県</th>
            </tr>
            <tr>
                <th hidden>43</th>
                <th>奈良県</th>
            </tr>
            <tr>
                <th hidden>44</th>
                <th>和歌山県</th>
            </tr>
            <tr class="borderTop">
                <th hidden>45</th>
                <th>鳥取県</th>
            </tr>
            <tr>
                <th hidden>46</th>
                <th>島根県</th>
            </tr>
            <tr>
                <th hidden>47</th>
                <th>岡山県</th>
            </tr>
            <tr>
                <th hidden>48</th>
                <th>広島県</th>
            </tr>
            <tr>
                <th hidden>49</th>
                <th>山口県</th>
            </tr>
            <tr class="borderTop">
                <th hidden>50</th>
                <th>徳島県</th>
            </tr>
            <tr>
                <th hidden>51</th>
                <th>香川県</th>
            </tr>
            <tr>
                <th hidden>52</th>
                <th>愛媛県</th>
            </tr>
            <tr>
                <th hidden>53</th>
                <th>高知県</th>
            </tr>
            <tr class="borderTop">
                <th hidden>54</th>
                <th>福岡県</th>
            </tr>
            <tr>
                <th hidden>55</th>
                <th>佐賀県</th>
            </tr>
            <tr>
                <th hidden>56</th>
                <th>長崎県</th>
            </tr>
            <tr>
                <th hidden>57</th>
                <th>熊本県</th>
            </tr>
            <tr>
                <th hidden>58</th>
                <th>大分県</th>
            </tr>
            <tr>
                <th hidden>59</th>
                <th>宮崎県</th>
            </tr>
            <tr>
                <th hidden>60</th>
                <th>鹿児島県</th>
            </tr>
            <tr class="borderBottom">
                <th hidden>61</th>
                <th>沖縄県</th>
            </tr>
        </table>

        <footer>
            公開：****-**-**
        </footer>

        <script>
            const short_urls = {
                zenkoku: "https://uub.jp/j.cgi/vcjxCITajxcjqajrcjqbqItjl/",
                hokkaido: "https://uub.jp/k.cgi/1/zfkdrezfziudqiqziwnJzfSiuciqntfViqcipldqfdusYdqfntdqtztzfzfzipuIippdqfztnetzfdrkfztzEnezfzFAqzEjqchipoq/",
                aomori: "https://uub.jp/k.cgi/2/fzfnfzixtViuzezftezfziuzw/",
                iwate: "https://uub.jp/k.cgi/3/fkdqeteSeczipodvv/",
                miyagi: "https://uub.jp/k.cgi/4/fdqedqfzfzfdrfnfzLEtzedrv/",
                akita: "https://uub.jp/k.cgi/5/dqfziqcncnteJzIezfq/",
                yamagata: "https://uub.jp/k.cgi/6/lyItenil/",
                hukusima: "https://uub.jp/k.cgi/7/fzfdqfdqiqzfnfdrfdqftnfzhfEteziqdrtfnfnbqzo/",
                ibaraki: "https://uub.jp/k.cgi/8/fniqniqnedreVntncedvtezezr/",
                totigi: "https://uub.jp/k.cgi/9/fzfniunfdrftInNo/",
                gunma: "https://uub.jp/k.cgi/10/iqzetniuzfkfzItzSkzztfzXu/",
                saitama: "https://uub.jp/k.cgi/11/cdqfdqsncnNzfdycdqcnfztneztszsIzsiqEneu/",
                tiba: "https://uub.jp/k.cgi/12/fziwnLedqenJesntszeszfzTtzYfJiqzu/",
                tokyo: "https://uub.jp/k.cgi/13/qtEVnNzSszItszIzblpaiyszYdv/",
                kanagawa: "https://uub.jp/k.cgi/14/encdxfzfztdrStITtNIo/",
                niigata: "https://uub.jp/k.cgi/15/fIfItftiqdqftIirciuntIx/",
                toyama: "https://uub.jp/k.cgi/16/zfnIntdvtu/",
                isikawa: "https://uub.jp/k.cgi/17/IfzfztdyYny/",
                hukui: "https://uub.jp/k.cgi/18/tnfzfVdrhTzp/",
                yamanasi: "https://uub.jp/k.cgi/19/iuzfnfncdqIfzSeceIl/",
                nagano: "https://uub.jp/k.cgi/20/nivnfdqiqnivztdvISeIzIiqcedrtzNnfdqthcivEntu/",
                gihu: "https://uub.jp/k.cgi/21/ezfnfzfzftzfdrtdqEnezkztnkzkIIp/",
                sizuoka: "https://uub.jp/k.cgi/22/fsfnfzJInIzfzsITzfzLniuzx/",
                aiti: "https://uub.jp/k.cgi/23/iuzfnfnfViqdrtzeIfIzkzedqfztTfzfnedrw/",
                mie: "https://uub.jp/k.cgi/24/vIeIEnkszixzfdu/",
                siga: "https://uub.jp/k.cgi/25/ftzNtnbrItVnq/",
                kyoto: "https://uub.jp/k.cgi/26/drtfdqtbrzJadrEzfu/",
                osaka: "https://uub.jp/k.cgi/27/ciqcnfnfdqfzfdqfdrftncdrFdvIo/",
                hyogo: "https://uub.jp/k.cgi/28/qniqzenetfnftfdvfnfVntnsip/",
                nara: "https://uub.jp/k.cgi/29/iqdrCfIiqEnSYippzftYw/",
                wakayama: "https://uub.jp/k.cgi/30/ynSYniqciqcnfnip/",
                tottori: "https://uub.jp/k.cgi/31/fzfnEniqthdrl/",
                simane: "https://uub.jp/k.cgi/32/uziwzfTftip/",
                okayama: "https://uub.jp/k.cgi/33/Stztfzkhfnivdrftzy/",
                hirosima: "https://uub.jp/k.cgi/34/InkftJzYivdqfzv/",
                yamaguti: "https://uub.jp/k.cgi/35/ftIzkztdqtztzfzfzu/",
                tokusima: "https://uub.jp/k.cgi/36/tneziqSfdrInfzfnu/",
                kagawa: "https://uub.jp/k.cgi/37/nkdqIztzSIzew/",
                ehime: "https://uub.jp/k.cgi/38/dqTntstzstIfnfq/",
                koti: "https://uub.jp/k.cgi/39/zSeEzentsnezfntIzeEzfztw/",
                hukuoka: "https://uub.jp/k.cgi/40/zfzfziqzftziqntdufdrfzknedwkfdqfzeArzho/",
                saga: "https://uub.jp/k.cgi/41/fztsdufntdrtzy/",
                nagasaki: "https://uub.jp/k.cgi/42/ponfTirztiu/",
                kumamoto: "https://uub.jp/k.cgi/43/dqiprdqiqSfzeInftIipoq/",
                oita: "https://uub.jp/k.cgi/44/ztzftztzkzIeziqr/",
                miyazaki: "https://uub.jp/k.cgi/45/dqfdqStIivdqenew/",
                kagosima: "https://uub.jp/k.cgi/46/zfzYntnkYnsIiprzedqiry/",
                okinawa: "https://uub.jp/k.cgi/47/wIsiyziqIipvciu/",
            };

            const urls = {
                zenkoku: "https://uub.jp/j.cgi?F=0&M=43334443444454443444444445434343444444443444444&ON=&OI=2&MY=",
                hokkaido: "https://uub.jp/k.cgi?P=1&F=0&M=44344403122234101001103121022111101200112101110000000000040000000000000001010121211121101113033111110111000000000000300031021100030000013012311000000010001110000010100111122010000000000&MY=",
                aomori: "https://uub.jp/k.cgi?P=2&F=0&M=2010010000031200000000101101010000010100&MY=",
                iwate: "https://uub.jp/k.cgi?P=3&F=0&M=300130020011122011111100000000001&MY=",
                miyagi: "https://uub.jp/k.cgi?P=4&F=0&M=32101101111010101110011101111001203&MY=",
                akita: "https://uub.jp/k.cgi?P=5&F=0&M=4123002113113000101110100&MY=",
                yamagata: "https://uub.jp/k.cgi?P=6&F=0&M=00240000000000000000000000000000011&MY=",
                hukusima: "https://uub.jp/k.cgi?P=7&F=0&M=13331101102111100010020304410112011101111011010001110111010&MY=",
                ibaraki: "https://uub.jp/k.cgi?P=8&F=0&M=21111110031121131001111001100011000110100100&MY=",
                totigi: "https://uub.jp/k.cgi?P=9&F=0&M=3131142011110110000011010&MY=",
                gunma: "https://uub.jp/k.cgi?P=10&F=0&M=12213124102201000001120010003031021&MY=",
                saitama: "https://uub.jp/k.cgi?P=11&F=0&M=331433133210011210113111311111111101313113113311101113001103000&MY=",
                tiba: "https://uub.jp/k.cgi?P=12&F=0&M=301243101330013321133002311001110032110000000101000230&MY=",
                tokyo: "https://uub.jp/k.cgi?P=13&F=0&M=53333333333333333333331413324133131313113103211130133000000000&MY=",
                kanagawa: "https://uub.jp/k.cgi?P=14&F=0&M=431324342131111210101111111131100&MY=",
                niigata: "https://uub.jp/k.cgi?P=15&F=0&M=420111000202404042110000030000&MY=",
                toyama: "https://uub.jp/k.cgi?P=16&F=0&M=411012111111211&MY=",
                isikawa: "https://uub.jp/k.cgi?P=17&F=0&M=4113011111111121010&MY=",
                hukui: "https://uub.jp/k.cgi?P=18&F=0&M=43441111310101121&MY=",
                yamanasi: "https://uub.jp/k.cgi?P=19&F=0&M=300131041113110110100000400&MY=",
                nagano: "https://uub.jp/k.cgi?P=20&F=0&M=34421110113131211110030004140013411111121000000110001110110000001121103000000&MY=",
                gihu: "https://uub.jp/k.cgi?P=21&F=0&M=422122112122100110311121111012010101101004&MY=",
                sizuoka: "https://uub.jp/k.cgi?P=22&F=0&M=43433101411423101103301000001132101&MY=",
                aiti: "https://uub.jp/k.cgi?P=23&F=0&M=432101110012214040012111100031011011010000011110011010&MY=",
                mie: "https://uub.jp/k.cgi?P=24&F=0&M=13322110340041111110100000000&MY=",
                siga: "https://uub.jp/k.cgi?P=25&F=0&M=4333311231312011312&MY=",
                kyoto: "https://uub.jp/k.cgi?P=26&F=0&M=52313333211102111101031111&MY=",
                osaka: "https://uub.jp/k.cgi?P=27&F=0&M=4111111341111311201111011101011101101130003&MY=",
                hyogo: "https://uub.jp/k.cgi?P=28&F=0&M=33112113101101111110201102001100100011000&MY=",
                nara: "https://uub.jp/k.cgi?P=29&F=0&M=301311030004034311110003020100000000000&MY=",
                wakayama: "https://uub.jp/k.cgi?P=30&F=0&M=110113000300011301311000000000&MY=",
                tottori: "https://uub.jp/k.cgi?P=31&F=0&M=4420001103110101111&MY=",
                simane: "https://uub.jp/k.cgi?P=32&F=0&M=2043010000000100000&MY=",
                okayama: "https://uub.jp/k.cgi?P=33&F=0&M=442210212131201111000000110&MY=",
                hirosima: "https://uub.jp/k.cgi?P=34&F=0&M=30123202211410111000000&MY=",
                yamaguti: "https://uub.jp/k.cgi?P=35&F=0&M=2121112122142010101&MY=",
                tokusima: "https://uub.jp/k.cgi?P=36&F=0&M=411110130001001121101011&MY=",
                kagawa: "https://uub.jp/k.cgi?P=37&F=0&M=41112211001413121&MY=",
                ehime: "https://uub.jp/k.cgi?P=38&F=0&M=42331233211431110110&MY=",
                koti: "https://uub.jp/k.cgi?P=39&F=0&M=4211010011332110010300131210103001&MY=",
                hukuoka: "https://uub.jp/k.cgi?P=40&F=0&M=441222200101110221111111001122101111011111211000120100010101&MY=",
                saga: "https://uub.jp/k.cgi?P=41&F=0&M=33210121111211011111&MY=",
                nagasaki: "https://uub.jp/k.cgi?P=42&F=0&M=430110000000000210000&MY=",
                kumamoto: "https://uub.jp/k.cgi?P=43&F=0&M=420114001013000111000000000000001110000000000&MY=",
                oita: "https://uub.jp/k.cgi?P=44&F=0&M=412212120121000100&MY=",
                miyazaki: "https://uub.jp/k.cgi?P=45&F=0&M=42131110111001100111000000&MY=",
                kagosima: "https://uub.jp/k.cgi?P=46&F=0&M=4331130221121130101000011100100000000000000&MY=",
                okinawa: "https://uub.jp/k.cgi?P=47&F=0&M=40001000000000334000000030000000000000000&MY=",
            };

            const hokkaidoPoints = urls.hokkaido.match(/(?<=M=)\d+(?=&)/)[0];

            const subprefMunis = {
                isikari: [0, 16, 23, 30, 32, 33, 35, 36], 
                osima: [1, 34, 37, 38, 39, 40, 41, 42, 43, 44, 45], 
                hiyama: [46, 47, 48, 49, 50, 51, 52], 
                siribesi: [2, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71], 
                sorati: [8, 9, 14, 15, 17, 21, 24, 25, 26, 27, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85], 
                kamikawa: [3, 19, 20, 28, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104], 
                rumoi: [11, 105, 106, 107, 108, 109, 110, 111], 
                soya: [13, 112, 113, 114, 115, 116, 117, 118, 119, 120], 
                okhotsk: [7, 10, 18, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135], 
                iburi: [4, 12, 29, 31, 136, 137, 138, 139, 140, 141, 142], 
                hidaka: [143, 144, 145, 146, 147, 148, 149], 
                tokati: [6, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167], 
                kusiro: [5, 168, 169, 170, 171, 172, 173, 174], 
                nemuro: [22, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184]
            };
            const subprefs = Object.keys(subprefMunis);

            // 北海道の振興局ごとのURLを取得
            for (let subpref of subprefs) {
                let result = "";

                for (let i = 0; i < hokkaidoPoints.length; i++) {
                    if (subprefMunis[subpref].includes(i)) {
                        result += hokkaidoPoints[i];
                    } else {
                        result += "0";
                    }
                }

                urls[subpref] = urls.hokkaido.replace(hokkaidoPoints, result);
            }

            // URLを割り当て
            for (let pref of Object.keys(urls)) {
                // 振興局ごとのリンクに対応するためには short_urls ではなく urls を使わなければならない
                document.getElementById(pref).href = urls[pref];
            }

            // 達成率等を計算
            let data = {};

            for (let pref of Object.keys(urls)) {
                const points = urls[pref].match(/(?<=M=)\d+(?=&)/)[0];
                const size = subprefs.includes(pref) ? subprefMunis[pref].length : points.length;
                const sum = Array.from(points).reduce((sum, point) => sum + Number(point), 0);
                const way = (points.match(/[12345]/g) ?? []).length;
                const visited = (points.match(/[345]/g) ?? []).length;
                data[pref] = {size: size, sum: sum, way: way, visited: visited};
            }

            // 都道府県別合計について計算
            let totalDat = Object.keys(data).reduce(
                (acc, pref) => {
                    if (pref == "zenkoku" || subprefs.includes(pref)) {
                        return acc;
                    } else {
                        return {size: acc.size + data[pref].size, 
                                sum: acc.sum + data[pref].sum, 
                                way: acc.way + data[pref].way, 
                                visited: acc.visited + data[pref].visited};
                    }
                }, {size: 0, sum: 0, way: 0, visited: 0});

            data.total = totalDat;

            // データを挿入
            // const calc = code => Function('data', `return ${code}`)(data);
            // const calc = code => Function(`return data => ${code}`)()(data);

            const rows = ["zenkoku", "total", "hokkaido", "isikari", "osima", "hiyama", "siribesi", "sorati", "kamikawa", "rumoi", "soya", "okhotsk", "iburi", "hidaka", "tokati", "kusiro", "nemuro", "aomori", "iwate", "miyagi", "akita", "yamagata", "hukusima", "ibaraki", "totigi", "gunma", "saitama", "tiba", "tokyo", "kanagawa", "niigata", "toyama", "isikawa", "hukui", "yamanasi", "nagano", "gihu", "sizuoka", "aiti", "mie", "siga", "kyoto", "osaka", "hyogo", "nara", "wakayama", "tottori", "simane", "okayama", "hirosima", "yamaguti", "tokusima", "kagawa", "ehime", "koti", "hukuoka", "saga", "nagasaki", "kumamoto", "oita", "miyazaki", "kagosima", "okinawa"];
            let i = 0;

            for (let table of [document.getElementById("table1"), document.getElementById("table2")]) {
                const trs = Object.values(table.children[0].children).slice(1);
                for (let tr of trs) {
                    let td1 = document.createElement("td");
                    td1.textContent = data[rows[i]].sum;
                    // td1.textContent = `data.${rows[i]}.sum`;

                    let td2 = document.createElement("td");
                    td2.textContent = data[rows[i]].way;
                    let td3 = document.createElement("td");
                    td3.textContent = data[rows[i]].visited;

                    let td4 = document.createElement("td");
                    td4.textContent = data[rows[i]].size;

                    let td5 = document.createElement("td");
                    td5.textContent = `${Math.floor(1000 * data[rows[i]].way / data[rows[i]].size) / 10}%`;
                    // td2.textContent = `\`\${Math.floor(1000 * data.${rows[i]}.way/data.${rows[i]}.size) / 10}%\``;
                    let td6 = document.createElement("td");
                    td6.textContent = `${Math.floor(1000 * data[rows[i]].visited / data[rows[i]].size) / 10}%`;
                    // td3.textContent = `\`\${Math.floor(1000 * data.${rows[i]}.visited/data.${rows[i]}.size) / 10}%\``;

                    tr.append(td1, td2, td3, td4, td5, td6);

                    // for (let cell of tr.children) {
                    //     if (cell.tagName == "TD") {
                    //         cell.textContent = calc(cell.textContent);
                    //     }
                    // }

                    i++;
                }
            }


            // 北海道の振興局を表示・非表示
            document.getElementById("showsSubpref").addEventListener("change", (e) => {
                let hokkaidoLi = document.getElementsByClassName("hokkaido")[0];

                if (!e.target.checked) {
                    document.getElementById("subprefs").hidden = true;

                    for (let subpref of subprefs) {
                        document.getElementById(subpref+"Tr").hidden = true;
                    }
                } else {
                    document.getElementById("subprefs").hidden = false;

                    for (let subpref of subprefs) {
                        document.getElementById(subpref+"Tr").hidden = false;
                    }
                }
            });


            // 表のソート
            let selectedCol = 0;
            let sortType = 0;

            for (let sorter of document.getElementsByClassName("sorter")) {
                sorter.parentElement.style.cursor = "pointer";
                sorter.style.userSelect = "none";

                sorter.parentElement.addEventListener("click", () => {
                    if (selectedCol == Number(sorter.id[3])) {
                        sortType = sortType + 1 > 2 ? 0 : sortType + 1;
                    } else {
                        sortType = 1;
                        selectedCol = Number(sorter.id[3]);
                    }

                    switch (sortType) {
                        case 0:
                            sorter.src = "res/keikenti/arrow_drop_updown.svg";
                            document.getElementById("table2").className = "borderControlled";
                            break;
                        case 1:
                            sorter.src = "res/keikenti/arrow_drop_up.svg";
                            document.getElementById("table2").className = "";
                            break;
                        case 2:
                            sorter.src = "res/keikenti/arrow_drop_down.svg";
                            document.getElementById("table2").className = "";
                            break;
                    }

                    for (let e of document.getElementsByClassName("sorter")) {
                        if (selectedCol != Number(e.id[3])) {
                            e.src = "res/keikenti/arrow_drop_updown.svg";
                        }
                    }

                    const sorted = 
                        [document.getElementById("table2").children[0].children[0]].concat(
                        Object.values(document.getElementById("table2").children[0].children).slice(1).sort((a, b) => {
                            // if (a.children[selectedCol].textContent == "NaN") {
                            //     return 1
                            // } else if (b.children[selectedCol].textContent == "NaN") {
                            //     return -1
                            // }

                            const aNumber = Number(a.children[selectedCol].textContent.replace("%", ""));
                            const bNumber = Number(b.children[selectedCol].textContent.replace("%", ""));

                            if (sortType == 0) {
                                return Number(a.children[0].textContent) - Number(b.children[0].textContent);
                            } else if (sortType == 1) {
                                return bNumber - aNumber;
                            } else if (sortType == 2) {
                                return aNumber - bNumber;
                            }
                        }));

                    for (let tr of sorted) {
                        document.getElementById("table2").children[0].appendChild(tr);
                    }
                });
            }
        </script>
    </body>
</html>
