<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title>yatabashi</title>
        <link rel="icon" href="res/favicon.ico">
        <link rel="stylesheet" href="res/style.css">
        <script src="res/isil/isildat.js"></script>
        
        <style>
            #lib-container {
                padding: 4px 0;
                border-top: 2px solid lightgray;
                border-bottom: 2px solid lightgray;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>yatabashi.github.io</h1>
            <div class="card">
                <a href="https://commons.wikimedia.org/wiki/File:Proto-semiticL-01.svg"><img class="icon" src="res/icon.svg"></a><a class="name" href="yatabashi.html">谷田橋 / yatabashi</a>
            </div>
        </header>
        
        <p id="lib-container"><a href="isil.html" style="font-weight: 700;">今日の図書館・博物館・公文書館</a><br><span id="lib"></span></p>
        
        <section>
            <h2>Статьи</h2>
            <ul>
                <li><a href="make-the-homepage.html">GitHub Pages でホームページを作る</a> (2022-11-08)</li>
                <li><a href="fontac.html">特定の文字列を表示できるフォントの一覧を出力したい</a> (2022-12-12)</li>
                <li><a href="install-satysfi.html">SATySFiを導入した</a> (2023-07-19)</li>
                <li><a href="hoshitele-dec.html">宇宙語（星屑テレパス）を読むぞ</a> (2023-10-18)</li>
                <li><a href="yol2023.html">私家版言語学オリンピック 2023</a> (2023-12-23)</li>
                <li><a href="zinkoki.html">塵劫記を読む</a> (2024-02-02)</li>
                <li><a href="bingo.html">n次元ビンゴにおける可能なビンゴ列の本数</a> (2024-08-12)</li>
                <li><a href="zorome.html">ゾロ目のときだけアホになるナベアツ</a> (2025-07-17)</li>
                <li><a href="12-segments.html">12セグメントで文字を作る</a> (2025-08-11)</li>
            </ul>
        </section>
        
        <section>
            <h2>Инструменты</h2>
            <ul>
                <li><a href="https://github.com/yatabashi/font_availability_checker">fontac</a>: 指定した文字列を表示できるフォントの一覧を出力してくれるプログラム（<a href="fontac.html">参考</a>）</li>
                <li><a href="https://github.com/yatabashi/kutimetable">KUTimetable</a>: 京大生向けのローカル時間割生成用拡張機能</li>
                <li><a href="datetime-is-prime.html">素数判定時計</a> / <a href="datetime-is-prime.html?r=pf11n">素因数分解時計</a> (2024-01-09): 過去k回の最小素因数を可視化するには<code>n=k</code>をクエリに指定してください。</li>
                <li><a href="hex.html">16進計算機</a> (2024-02-26)</li>
                <li><a href="manju.html">満洲語キーボード</a> (2024-07-15)</li>
                <li><a href="colorpicker.html">カラーピッカー</a> (2025-03-19)</li>
            </ul>
        </section>
        
        <section>
            <h2>Остальные содержания</h2>
            <ul>
                <li><a href="https://twitter.com/yatabashi/status/1354788421764431878">Twitter:言オリ風問題</a> / <a href="res/yol/yol2021.pdf">PDF版</a> (2021-01-28)</li>
                <li><a href="keikenti.html">経県値まとめ</a></li>
            </ul>
        </section>
        
        <section>
            <h2>Контакт</h2>
            <ul>
                <li>Twitter: <a href="https://twitter.com/yatabashi">@yatabashi</a></li>
                <li><i>Mastodon: <a href="https://fedibird.com/@yatabashi">@yatabashi@fedibird.com</a> (неактивен)</i></li>
                <li><i>Misskey: <a href="https://misskey.io/@yatabashi">@yatabashi@misskey.io</a> (неактивен)</i></li>
                <li><i>Bluesky: <a href="https://bsky.app/profile/yatabashi.bsky.social">@yatabashi.bsky.social</a> (неактивен)</i></li>
                <li><i>Mixi2: <a href="https://mixi.social/@yatabashi">@yatabashi</a> (неактивен)</i></li>
                <li>GitHub: <a href="https://github.com/yatabashi">yatabashi</a></li>
            </ul>
        </section>

        <footer>
            <p>このサイトでは通常、見出しと本文に <a href="https://koruri.github.io/">Koruri</a> と補助的に <a href="http://jikasei.me/font/mgenplus/">Mgen+</a> を、コード部分に <a href="https://fonts.google.com/noto/specimen/Noto+Sans+Mono">Noto Sans Mono</a> を使用しています。また、コンテンツは特に規定のない限り <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0 ライセンス</a>の下に提供されます。</p>
        </footer>
        
        <script>
            function getTodaysNumber() {
                function now() {
                    let now = new Date();
                    let year = now.getFullYear().toString();
                    let month = (now.getMonth() + 1).toString().padStart(2, '0');
                    let day = now.getDate().toString().padStart(2, '0');
                    
                    return Number(year+month+day);
                    
                    // let hour = now.getHours().toString().padStart(2, '0');
                    // let minute = now.getMinutes().toString().padStart(2, '0');
                    // let second = now.getSeconds().toString().padStart(2, '0');
                    // let milli = now.getMilliseconds().toString();
                    // console.log(year+month+day+hour+minute+second+milli);
                    // return Number(year+month+day+hour+minute+second+milli);
                }
                
                let x = 123456789;
                let y = 362436069;
                let z = 521288629;
                let w = now();
                
                function xorshift() {
                    const t = x ^ (x << 11);
                    x = y; y = z; z = w;
                    w = (w^(w>>19))^(t^(t>>8));
                };
                
                for (let i = 0; i < 32; i++) {
                    xorshift();
                }
                
                return w;
            }
            
            function getLibDatStr(n) {
                console.log(`startgetdat: ${(new Date()).getTime()} ms`);
                
                const LIB = 7936;
                const MUS = 4372;
                const ARC = 102;
                
                const r = (n % (LIB + MUS + ARC)) + 1;
                let rISIL;
                if (r < LIB) {
                    rISIL = `JP-1${r.toString().padStart(6, '0')}`;
                } else if (r == LIB) {
                    rISIL = `JP-1${r.toString().padStart(6, '0')}`;
                } else if (r < LIB + MUS) {
                    rISIL = `JP-2${(r - LIB).toString().padStart(6, '0')}`;
                } else if (r == LIB + MUS) {
                    rISIL = `JP-2${(r - LIB).toString().padStart(6, '0')}`;
                } else if (r < LIB + MUS + ARC) {
                    rISIL = `JP-3${(r - LIB - MUS).toString().padStart(6, '0')}`;
                } else { // r = LIB + MUS + ARC
                    rISIL = `JP-3${(r - LIB - MUS).toString().padStart(6, '0')}`;
                }
                
                return [rISIL].concat(ISILTABLE[rISIL]);
            }
            
            function getInsertion(dat) {
                if (dat.length == 3) { // 欠番・廃館
                    if (dat[2]) {
                        let postDat = [dat[2]].concat(ISILTABLE[dat[2]]);
                        return `${dat[0]} <del>${dat[1]}</del>`
                            + `<br>→`
                            + ` ${getInsertion(postDat)}`;
                    } else {
                        if (dat[1] == "[欠番]") {
                            return `${dat[0]} ${dat[1]}`;
                        } else {
                            return `${dat[0]} <del>${dat[1]}</del>（廃館）`;
                        }
                    }
                } else {
                    if (!dat[2] && !dat[5]) { // 住所なし、リンクなし
                        return `${dat[0]} ${dat[1]}（住所不明）`
                    } else if (!dat[2] && dat[5]) { // 住所なし、リンクあり
                        return `${dat[0]} <a href="${dat[5]}">${dat[1]}</a>（住所不明）`
                    } else if (!dat[5]) { // 住所あり、リンクなし
                        return `${dat[0]} ${dat[1]}（${dat[2]+dat[3]+dat[4]}）`
                    } else { // 住所あり、リンクあり
                        return `${dat[0]} <a href="${dat[5]}">${dat[1]}</a>（${dat[2]+dat[3]+dat[4]}）`
                    }
                }
            }
            
            let data = getLibDatStr(getTodaysNumber());
            document.getElementById('lib').innerHTML = getInsertion(data);
        </script>
    </body>
</html>
